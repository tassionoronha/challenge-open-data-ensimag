<div>
  <link rel="stylesheet" href="css/about.css"/>

  <h1>Pollution de l'air à Grenoble</h1>

  <div class="maindiv">
    <div class="subdiv">
      <h2>Avant-propos</h2>
      <p>
        Afin de pouvoir utiliser la bibliothèque chart.js et permettre d'afficher certains de nos graphiques, veulliez suivre les étapes suivantes:<br/>
        - Rendez-vous à la page <a href="about:config">about:config</a> de votre navigateur Firefox.<br/>
        - Cliquez sur "Je prends le risque".<br/>
        - Dans la barre de recherche, tapez "modules".<br/>
        - Trouvez la ligne "dom.moduleScripts.enabled".<br/>
        - Double-cliquez dessus afin que le booleén prenne la valeur "true".<br/><br/>
        Tous nos graphiques devraient désormais s'afficher correctement.
      </p>
    </div>

    <div class="subdiv">
      <h2>Démarche</h2>
      <p>
        Grenoble est une ville entourée de montagnes. De par cette particularité géographique, l'air de cette ville connaît souvent de fort piques de pollution. En effet, la pollution, notamment aux particules fines PM10, est prise au piège et n'est pas dispersée par le vent.<br/>
        Ainsi, la pollution de l'air à Grenoble est un enjeu de santé important et nous avons voulu en savoir plus à ce sujet.
      </p>
    </div>

    <div class="subdiv">
      <h2>Sources des données</h2>
      <p>
        Toutes nos données sont tirées de <a href="http://www.atmo-auvergnerhonealpes.fr/donnees/telecharger">http://www.atmo-auvergnerhonealpes.fr/donnees/telecharger</a>.<br/>
        Atmo est un site contenant des données publiques sur la pollution de l'air en Auvergne-Rhône-Alpes. Il y est possible d'y visualiser sur une carte la qualité de l'air en temps réel ainsi d'en voir une synthèse annuelle. En outre, les données récoltées par Atmo sont disponibles au téléchargement.
        <br/><br/>
        Sur ce site, nous traitons les données concernant la pollution aux particules fines PM10 à Grenoble entre le 1er janvier 2007 et le 31 décembre 2017.
      </p>
    </div>

    <div class="subdiv">
      <h2>Traitements opérés</h2>
      <p>
        Les données que nous récupérions étaient au format CSV. Afin de faciliter leur exploitation, nous avons commencé par les convertir en json à l'aide d'un convertisseur en ligne.
        <br/><br/>
        Les données que nous récupérions étaient déjà classifié en fonction de la station qui avait enregistré ses données. Cependant, elles s'étalaient sur une grande période de temps. Avant de pouvoir réellement les exploiter, il nous fallait donc les "découper" en période plus petites. Nous affichons ensuite soit une seule période (Année par station), soit plusieurs périodes simultanément (affichage en période).
        <br/><br/>
        Afin de tirer le maximum des données que nous avions récupéré, nous avons également effectué des calculs de moyennes sur celles-ci. Ainsi, pour l'affichage en période, la moyenne pour chaque jour dans une période était calculée puis affichée. Par exemple, pour une période de 7 jours, cela nous donnait la moyenne pour tous les lundis dans l'intervalle puis tous les mardis, etc...
        <br/><br/>
        Afin de réaliser notre carte, nous avons également du placer géographiquement nos données.
      </p>
    </div>

    <div class="subdiv">
      <h2>Visualisation des données</h2>
      <h3>Affichage des données par périodes</h3>
      <p>
        Le principe de l'affichage des données par période est de pouvoir déterminer s'il y a une certaine rythmicité dans la pollution de l'air. On peut, par exemple, se demander si le fait d'être en week-end n'entraînerait pas une diminution de la pollution de l'air. En effet, de nombreuses personnes sont en repos le week-end et n'ont donc pas à prendre la voiture pour aller travailler.
        <br/><br/>
        On pourrait également se demander si les saisons et le climat qui va avec n'auraient pas à un lien avec la pollution de l'air.
        <br/><br/>
        Les données sont affichées sur un tableau à deux dimensions :<br/>
        L'axe des abscisses nous indique à quel jour dans la période le point appartient.<br/>
        L'axe des ordonnées nous informe sur le niveau de pollution en microgrammes par mètres cubes d'air (microg/m3). <br/>
        Enfin, la couleur du point nous indique à quelle période celui-ci appartient. En outre, nous avons utilisé une échelle de teinte pour coloriser les périodes. Ainsi, plus la période est loin dans le passé, plus elle sera de couleur claire. Il est toutefois possible d'inverser l'échelle de teinte<br/>
        Afin de rendre notre site accessible aux daltoniens, nous avons fait en sorte de pouvoir choisir l'échelle de teinte que l'on souhaite utilise.
        <br/><br/>
        Afin de pouvoir visualiser au mieux les données, de nombreuses options sont disponibles. Ainsi, il est possible d'avoir, au choix, un affichage en nuage de points ou en spline en cliquant sur le bouton "Changer l'affichage". La durée d'une période est configurable ainsi que la plage de données que l'on souhaite utiliser. De plus, il est possible de choisir la station pour laquelle nous observerons les données. Il est également possible de masquer la légende pour gagner de la place sur le graphique.
        <br/><br/>
        Pour finir, une spline (ligne arrondit) représentant la moyenne des données est toujours affichée. C'est cette ligne moyenne qui nous permettra véritablement de faire ressortir une tendance.
      </p>
      <h3>Timelapse de la pollution sur la carte de Grenoble</h3>
      <p>
        Cette page affiche une carte de Grenoble avec, en sur-impression, les données de la pollution. Plus la zone est polluée, plus la zone sera rouge et opaque. À l'inverse, moins la zone est polluée, plus elle sera verte et translucide.
        <br/><br/>
        Il est possible de voir l'évolution temporelle de la pollution à Grenoble en cliquant sur "Play". Cela a pour effet de lancer le timelapse. On peut l'arrêter à tout moment en cliquant sur "Stop" avant de le remettre en route. On peut également indique la date que l'on veut observer. Si l'on clique ensuite sur "Play", le timelapse reprendra depuis cette date. 
      </p>
      <h3 style="color: red;">A COMPLETER !!!</h3>
    </div>

    <div class="subdiv">
      <h2>Architecture</h2>
      <p style="text-align:center">
        <img src="img/arquitecture.png"</img>
      </p>
      <p>
        Notre architecture se découpe en trois rôles basiques. Cela permet de maximiser l'organisation du code et de faciliter une croissance future avec l'ajout de nouveaux graphiques et le traitement d'autres types de données.
        <ul>
          <li>
            Dans la première partie (Views), nous avons les fichiers responsables de l'affichage des résultats et du contrôle des objets du DOM. Sont présents dans ces fichiers les fonctions responsables de demander au Factory.js le graphique avec les paramètres d'utilisation. Le fichier Functions.js fourni un ensemble de petites fonctions pour aider le fichier index.html à contrôler le flux fourni par Factory.js. Fonctions.js rafraîchit également l'écran avec les données.
            <br/><br/>
          </li>
          <li>
            La couche Graphic Manager est responsable de la gestion des requêtes venant de la couche Views. Elle maintient également les états, demande les données au Data Manager, demande les règles fournis par l'utilisateur et s'assure que lesdites règles sont valides.
            <br/><br/>
            La couche Views, n'accède pas directement aux classes graphiques. Elle envoie ses requêtes à la Factory qui, elle, gère les objets graphiques. Avec ça, nous avons un code prêt à recevoir d'autres types de spécifications graphiques sans créer de dépendances fonctionnelles avec les anciennes classes. 
            <br/><br/>
            Enfin, la classe Graphique.js contient des fonctions permettant d'aider la construction de la figure finale.
            <br/><br/>
          </li>
          <li>
            Pour finir, la dernière couche de notre application est responsable d'appliquer les règles d'édition nécessaires à chaque type de données importées par l'application. Elle les convertit également et les rend disponibles pour le Graphic Manager.
          </li>
        </ul>
      </p>
    </div>

    <div class="subdiv">
      <h2>Choix des technologies</h2>
      <p>
        Pour réaliser l'affichage en périodes, nous avons utilisé la librairie <a href="http://c3js.org/">C3</a> qui, elle-même, se base sur <a href="https://d3js.org/">D3</a>.
        <br/><br/>
        Pour tous les autres affichages, notamment les radars, nous avons utilisé la librairie <a href="http://www.chartjs.org/">Chart.js</a>.
      </p>
    </div>

    <div class="subdiv">
      <h2>Résultats observés</h2>
      <p>
        Grâce à l'affichage des données par périodes, nous nous sommes rendu compte que la pollution baissait le week-end et, plus particulièrement, le dimanche. Si vous souhaitez observer ce phénomène au mieux, nous vous conseillons de commencer par masquer la légende puis de choisir une période de 28 jours pour un intervalle de données allant du 1er janvier 2007 au 31 décembre 2017. Enfin, cliquez sur "Changer l'intervalle".
        <br/><br/>
        Sur le même affichage des données par période, il vous est proposé sélectionner la station. En changeant l'affichage d'une station à l'autre, on s'aperçoit que la variation due au week-end est plus importante à certains endroits de Grenoble qu'à d'autres. Ainsi, la pollution à "Fontaine les Balmes", qui est une zone principalement résidentielle, varie moins le week-end que celle à "Grenoble Rocade sud".
        <br/><br/>
        Grâce à divers affichages, notamment celui en périodes, nous avons également pu remarquer que Grenoble est, de manière générale, moins pollué en été qu'en hiver avec des variations beaucoup moins grandes. On peut également visualiser ce phénomène en affichant en ligne les années par stations. Ce phénomène pourrait, en partie, s'expliquer par le fait qu'il y a moins d'habitants à Grenoble en été qu'en hiver. 
        <br/><br/>
        En observant les données récoltées sur 10 ans, nous avons également pu nous rendre compte que la pollution en PM10 était plus importante il y a 10 ans que maintenant. Cela pourrait être dû au fait que les voitures modernes émettent moins de ce type de particules. En tout cas, il s'agit là d'un signe encourageant.
        <br/><br/>
        Lorsque l'on visualise les données par mois par stations ainsi que sur la carte, on peut s'apercevoir que certains endroit de Grenoble sont systématiquement plus pollués que d'autres. Ainsi, le centre de Grenoble a tendance à être plus pollué que sa périphérie. La seule exception correspond à "Grenoble Rocade sud" qui peut s'expliquer par le fait que, de par le trafic, les rocades et autoroutes sont plus polluées que les zones urbaines.
        <br/><br/>
        Grâce à l'affichage de Stations par jours, on s'aperçoit que, dans une journée, la pollution commence à monter aux environs de 6~7h, peut grandement varier au cours de la journée mais redescend toujours le soir, la plupart du temps à partir de 19h.
      </p>
  </div>
</div>